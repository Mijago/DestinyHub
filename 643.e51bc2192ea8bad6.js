"use strict";(self.webpackChunkD2Hub=self.webpackChunkD2Hub||[]).push([[643],{1643:(Et,F,c)=>{c.r(F),c.d(F,{TrialsDataReportModule:()=>Ot});var k=c(6895),P=c(1048),X=c(1184),S=c(5861),Z=c(3905),b=c(8184),v=c(4080),e=c(4650),U=c(3238),I=c(4859),y=c(7579),$=c(3353),K=c(5698),q=c(2722),f=c(7340),j=c(3948),L=c(2289);function tt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"button",3),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.action())}),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.data.action)}}function et(n,i){}const O=new e.OlP("MatSnackBarData");class w{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const at=Math.pow(2,31)-1;class E{constructor(i,t){this._overlayRef=t,this._afterDismissed=new y.x,this._afterOpened=new y.x,this._onAction=new y.x,this._dismissedByAction=!1,this.containerInstance=i,i._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(i){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(i,at))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let nt=(()=>{class n{constructor(t,a){this.snackBarRef=t,this.data=a}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E),e.Y36(O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"span",0),e._uU(1),e.qZA(),e.YNc(2,tt,3,1,"div",1)),2&t&&(e.xp6(1),e.Oqu(a.data.message),e.xp6(1),e.Q6J("ngIf",a.hasAction))},dependencies:[k.O5,I.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const st={snackBarState:(0,f.X$)("state",[(0,f.SB)("void, hidden",(0,f.oB)({transform:"scale(0.8)",opacity:0})),(0,f.SB)("visible",(0,f.oB)({transform:"scale(1)",opacity:1})),(0,f.eR)("* => visible",(0,f.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,f.eR)("* => void, * => hidden",(0,f.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,f.oB)({opacity:0})))])};let it=(()=>{class n extends v.en{constructor(t,a,s,r,o){super(),this._ngZone=t,this._elementRef=a,this._changeDetectorRef=s,this._platform=r,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new y.x,this._onExit=new y.x,this._onEnter=new y.x,this._animationState="void",this.attachDomPortal=l=>{this._assertNotAttached();const h=this._portalOutlet.attachDomPortal(l);return this._afterPortalAttached(),h},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const a=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),a}attachTemplatePortal(t){this._assertNotAttached();const a=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),a}onAnimationEnd(t){const{fromState:a,toState:s}=t;if(("void"===s&&"void"!==a||"hidden"===s)&&this._completeExit(),"visible"===s){const r=this._onEnter;this._ngZone.run(()=>{r.next(),r.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,K.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,a=this.snackBarConfig.panelClass;a&&(Array.isArray(a)?a.forEach(s=>t.classList.add(s)):t.classList.add(a))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),a=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&a){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(s=document.activeElement),t.removeAttribute("aria-hidden"),a.appendChild(t),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36($.t4),e.Y36(w))},n.\u0275dir=e.lG2({type:n,viewQuery:function(t,a){if(1&t&&e.Gf(v.Pl,7),2&t){let s;e.iGM(s=e.CRH())&&(a._portalOutlet=s.first)}},features:[e.qOj]}),n})(),rt=(()=>{class n extends it{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let i;return function(a){return(i||(i=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,a){1&t&&e.WFA("@state.done",function(r){return a.onAnimationEnd(r)}),2&t&&e.d8E("@state",a._animationState)},features:[e.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,et,0,0,"ng-template",1),e.qZA(),e._UZ(2,"div")),2&t&&(e.xp6(2),e.uIk("aria-live",a._live)("role",a._role))},dependencies:[v.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[st.snackBarState]}}),n})(),G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[b.U8,v.eL,k.ez,I.ot,U.BQ,U.BQ]}),n})();const N=new e.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function ot(){return new w}});let ct=(()=>{class n{constructor(t,a,s,r,o,l){this._overlay=t,this._live=a,this._injector=s,this._breakpointObserver=r,this._parentSnackBar=o,this._defaultConfig=l,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,a){return this._attach(t,a)}openFromTemplate(t,a){return this._attach(t,a)}open(t,a="",s){const r={...this._defaultConfig,...s};return r.data={message:t,action:a},r.announcementMessage===t&&(r.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,r)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,a){const r=e.zs3.create({parent:a&&a.viewContainerRef&&a.viewContainerRef.injector||this._injector,providers:[{provide:w,useValue:a}]}),o=new v.C5(this.snackBarContainerComponent,a.viewContainerRef,r),l=t.attach(o);return l.instance.snackBarConfig=a,l.instance}_attach(t,a){const s={...new w,...this._defaultConfig,...a},r=this._createOverlay(s),o=this._attachSnackBarContainer(r,s),l=new E(o,r);if(t instanceof e.Rgc){const h=new v.UE(t,null,{$implicit:s.data,snackBarRef:l});l.instance=o.attachTemplatePortal(h)}else{const h=this._createInjector(s,l),u=new v.C5(t,void 0,h),d=o.attachComponentPortal(u);l.instance=d.instance}return this._breakpointObserver.observe(L.u3.HandsetPortrait).pipe((0,q.R)(r.detachments())).subscribe(h=>{r.overlayElement.classList.toggle(this.handsetCssClass,h.matches)}),s.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(l,s),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(t,a){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),a.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),a.duration&&a.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(a.duration))}_createOverlay(t){const a=new b.X_;a.direction=t.direction;let s=this._overlay.position().global();const r="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!r||"end"===t.horizontalPosition&&r,l=!o&&"center"!==t.horizontalPosition;return o?s.left("0"):l?s.right("0"):s.centerHorizontally(),"top"===t.verticalPosition?s.top("0"):s.bottom("0"),a.positionStrategy=s,this._overlay.create(a)}_createInjector(t,a){return e.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:E,useValue:a},{provide:O,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.aV),e.LFG(j.Kd),e.LFG(e.zs3),e.LFG(L.Yg),e.LFG(n,12),e.LFG(N))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),lt=(()=>{class n extends ct{constructor(t,a,s,r,o,l){super(t,a,s,r,o,l),this.simpleSnackBarComponent=nt,this.snackBarContainerComponent=rt,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.aV),e.LFG(j.Kd),e.LFG(e.zs3),e.LFG(L.Yg),e.LFG(n,12),e.LFG(N))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:G}),n})(),ht=(()=>{class n{constructor(t){this.data=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-progress-toast"]],decls:1,vars:1,template:function(t,a){1&t&&e._uU(0),2&t&&e.hij("",a.data,"\n")}}),n})();var dt=c(529);let W=(()=>{class n{constructor(t){this.http=t}getApiData(t){return this.http.get("https://api.trialsofthenine.com/weeks/"+t)}getMostRecent(){return this.getApiData(0)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(dt.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=c(3546),D=c(1576),Y=c(7392),M=c(9646),B=c(515),H=c(4986),ut=c(9751),pt=c(4482),V=c(5403),mt=c(8421);const J={leading:!0,trailing:!1};var gt=c(5963);var yt=c(3900);class _{constructor(i){this.changes=i}static of(i){return new _(i)}notEmpty(i){if(this.changes[i]){const t=this.changes[i].currentValue;if(null!=t)return(0,M.of)(t)}return B.E}has(i){return this.changes[i]?(0,M.of)(this.changes[i].currentValue):B.E}notFirst(i){return this.changes[i]&&!this.changes[i].isFirstChange()?(0,M.of)(this.changes[i].currentValue):B.E}notFirstAndEmpty(i){if(this.changes[i]&&!this.changes[i].isFirstChange()){const t=this.changes[i].currentValue;if(null!=t)return(0,M.of)(t)}return B.E}}const Q=new e.OlP("NGX_ECHARTS_CONFIG");let z=(()=>{class n{constructor(t,a,s){this.el=a,this.ngZone=s,this.autoResize=!0,this.loadingType="default",this.chartInit=new e.vpe,this.optionsError=new e.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new y.x,this.echarts=t.echarts}ngOnChanges(t){const a=_.of(t);a.notFirstAndEmpty("options").subscribe(s=>this.onOptionsChange(s)),a.notFirstAndEmpty("merge").subscribe(s=>this.setOption(s)),a.has("loading").subscribe(s=>this.toggleLoading(!!s)),a.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(function vt(n,i=H.z,t=J){const a=(0,gt.H)(n,i);return function ft(n,i=J){return(0,pt.e)((t,a)=>{const{leading:s,trailing:r}=i;let o=!1,l=null,h=null,u=!1;const d=()=>{h?.unsubscribe(),h=null,r&&(T(),u&&a.complete())},g=()=>{h=null,u&&a.complete()},C=p=>h=(0,mt.Xf)(n(p)).subscribe((0,V.x)(a,d,g)),T=()=>{if(o){o=!1;const p=l;l=null,a.next(p),!u&&C(p)}};t.subscribe((0,V.x)(a,p=>{o=!0,l=p,(!h||h.closed)&&(s?T():C(p))},()=>{u=!0,(!(r&&o&&h)||h.closed)&&a.complete()}))})}(()=>a,t)}(100,H.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart&&(t?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(t,a){if(this.chart)try{this.chart.setOption(t,a)}catch(s){console.error(s),this.optionsError.emit(s)}}refreshChart(){var t=this;return(0,S.Z)(function*(){t.dispose(),yield t.initChart()})()}createChart(){const t=this.el.nativeElement;if(window&&window.getComputedStyle){const a=window.getComputedStyle(t,null).getPropertyValue("height");(!a||"0px"===a)&&(!t.style.height||"0px"===t.style.height)&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:s})=>s(t,this.theme,this.initOpts)))}initChart(){var t=this;return(0,S.Z)(function*(){yield t.onOptionsChange(t.options),t.merge&&t.chart&&t.setOption(t.merge)})()}onOptionsChange(t){var a=this;return(0,S.Z)(function*(){!t||(a.chart||(a.chart=yield a.createChart(),a.chartInit.emit(a.chart)),a.setOption(a.options,!0))})()}createLazyEvent(t){return this.chartInit.pipe((0,yt.w)(a=>new ut.y(s=>(a.on(t,r=>this.ngZone.run(()=>s.next(r))),()=>{this.chart&&(this.chart.isDisposed()||a.off(t))}))))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q),e.Y36(e.SBq),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[e.TTD]}),n})(),xt=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Q,useValue:t}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),St=(()=>{class n{constructor(){this.subclassData=[],this.chartOption={tooltip:{trigger:"item",confine:!0,formatter:t=>{let a=t.data;var s=(100*a.percent).toFixed(1);return`${a.name}: ${a.value} (${s}%)`}},series:[{data:[820,932,901,934,1290,1330,1320],type:"sunburst",radius:[0,"90%"],label:{rotate:"radial"}}]}}isHunter(t){return["Gunslinger","Revenant","Arcstrider","Nightstalker"].indexOf(t.name)>-1}isWarlock(t){return["Dawnblade","Shadebinder","Stormcaller","Voidwalker"].indexOf(t.name)>-1}isTitan(t){return["Sunbreaker","Behemoth","Striker","Sentinel"].indexOf(t.name)>-1}ngOnChanges(t){var a=this.subclassData.filter(d=>this.isHunter(d)),s=this.subclassData.filter(d=>this.isWarlock(d)),r=this.subclassData.filter(d=>this.isTitan(d)),o=a.reduce((d,g)=>d+g.amount,0),l=s.reduce((d,g)=>d+g.amount,0),h=r.reduce((d,g)=>d+g.amount,0),u=o+h+l;this.chartOption.series[0].data=[{name:"Hunter",children:a.map(d=>({name:d.name,value:d.amount,itemStyle:{color:"#77afc0"},percent:d.amount/o})),itemStyle:{color:"#5f9cbb"},percent:o/u},{name:"Warlock",children:s.map(d=>({name:d.name,value:d.amount,itemStyle:{color:"#bdb177"},percent:d.amount/l})),itemStyle:{color:"#d7c16e"},percent:l/u},{name:"Titan",children:r.map(d=>({name:d.name,value:d.amount,itemStyle:{color:"#bd7777"},percent:d.amount/h})),itemStyle:{color:"#b76262"},percent:h/u}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-class-and-subclass-chart"]],inputs:{subclassData:"subclassData"},features:[e.TTD],decls:1,vars:1,consts:[["echarts","",1,"demo-chart",3,"options"]],template:function(t,a){1&t&&e._UZ(0,"div",0),2&t&&e.Q6J("options",a.chartOption)},dependencies:[z],styles:[".demo-chart[_ngcontent-%COMP%]{height:400px}"]}),n})(),Ct=(()=>{class n{constructor(){this.weeks=[],this.overwrite={series:[{},{},{}]},this.chartOption={tooltip:{trigger:"axis",confine:!0},legend:{textStyle:{color:"white"},show:!0},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"time",boundaryGap:!1}],yAxis:[{alignTicks:!0,type:"value",max:100,min:0}],series:[{name:"Hunter",type:"line",stack:"Total",color:"#5f9cbb",areaStyle:{},emphasis:{focus:"series"},data:[]},{name:"Titan",type:"line",stack:"Total",color:"#b76262",areaStyle:{},emphasis:{focus:"series"},data:[]},{name:"Warlock",type:"line",stack:"Total",color:"#b6b45c",areaStyle:{},emphasis:{focus:"series"},data:[]}]}}isHunter(t){return["Gunslinger","Revenant","Arcstrider","Nightstalker"].indexOf(t.name)>-1}isWarlock(t){return["Dawnblade","Shadebinder","Stormcaller","Voidwalker"].indexOf(t.name)>-1}isTitan(t){return["Sunbreaker","Behemoth","Striker","Sentinel"].indexOf(t.name)>-1}ngOnInit(){}ngOnChanges(t){if(0!=this.weeks.length){var a=[],s=[],r=[];for(let R of this.weeks){var o=new Date(Date.parse(R.startDate)),l=[o.getFullYear(),o.getMonth()+1,o.getDate()].join("/"),h=R.subclass.filter(m=>this.isHunter(m)),u=R.subclass.filter(m=>this.isWarlock(m)),d=R.subclass.filter(m=>this.isTitan(m)),g=h.reduce((m,A)=>m+A.amount,0),C=u.reduce((m,A)=>m+A.amount,0),T=d.reduce((m,A)=>m+A.amount,0),p=g+C+T;0!=p&&(a.push([l,(g/p*100).toFixed(2)]),s.push([l,(T/p*100).toFixed(2)]),r.push([l,(C/p*100).toFixed(2)]))}this.overwrite.series[0].data=a,this.overwrite.series[1].data=s,this.overwrite.series[2].data=r,this.overwrite=Object.assign({},this.overwrite)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-class-and-subclass-timeline-chart"]],inputs:{weeks:"weeks"},features:[e.TTD],decls:1,vars:2,consts:[["echarts","",1,"demo-chart",3,"options","merge"]],template:function(t,a){1&t&&e._UZ(0,"div",0),2&t&&e.Q6J("options",a.chartOption)("merge",a.overwrite)},dependencies:[z]}),n})(),Tt=(()=>{class n{constructor(){this.weeks=[],this.overwrite={},this.chartOption={tooltip:{trigger:"item",confine:!0},legend:{textStyle:{color:"white"},show:!0},grid:{left:"3%",right:"4%",bottom:"12%",top:"12%",containLabel:!0},xAxis:[{type:"time",boundaryGap:!1}],darkMode:!0,dataZoom:[{type:"inside"},{type:"slider"}],yAxis:[{alignTicks:!0,type:"value",max:100,min:0}],series:[]}}ngOnInit(){}ngOnChanges(t){if(0!=this.weeks.length){var a={};for(let l of this.weeks){var s=l.platforms[0].weaponTypes.reduce((h,u)=>h+u.kills,0);for(let h of l.platforms[0].weaponTypes){null==a[h.weaponType]&&(a[h.weaponType]={name:h.weaponType,type:"line",smooth:!0,stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:[]});var r=new Date(Date.parse(l.startDate)),o=[r.getFullYear(),r.getMonth()+1,r.getDate()].join("/");let u=+(h.kills/s*100).toFixed(2);a[h.weaponType].data.push([o,u])}}this.overwrite={series:Object.values(a)}}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-weapon-usage-chart"]],inputs:{weeks:"weeks"},features:[e.TTD],decls:1,vars:2,consts:[["echarts","",1,"demo-chart",3,"options","merge"]],template:function(t,a){1&t&&e._UZ(0,"div",0),2&t&&e.Q6J("options",a.chartOption)("merge",a.overwrite)},dependencies:[z],styles:[".demo-chart[_ngcontent-%COMP%]{height:450px}"]}),n})();function At(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",5)(2,"mat-icon"),e._uU(3,"dashboard"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Loading trials information..."),e.qZA()(),e._UZ(6,"mat-icon"),e.qZA())}function kt(n,i){if(1&n&&(e.TgZ(0,"div",6)(1,"div",7)(2,"mat-card")(3,"mat-card-title-group")(4,"mat-card-title"),e._uU(5," Trials Subclass usage "),e.qZA(),e.TgZ(6,"mat-card-subtitle"),e._uU(7),e.qZA()(),e._UZ(8,"app-class-and-subclass-chart",8),e.qZA()(),e.TgZ(9,"div",7)(10,"mat-card")(11,"mat-card-title-group")(12,"mat-card-title"),e._uU(13," Trials Class distribution over time "),e.qZA(),e.TgZ(14,"mat-card-subtitle"),e._uU(15),e.qZA()(),e._UZ(16,"app-class-and-subclass-timeline-chart",9),e.qZA()()()),2&n){const t=e.oxw();e.xp6(7),e.hij(" Week ",t.week," "),e.xp6(1),e.Q6J("subclassData",t.trialsReportData.subclass),e.xp6(7),e.hij(" Weeks 114 to ",t.week," "),e.xp6(1),e.Q6J("weeks",t.previousWeeks)}}function bt(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"mat-card")(3,"mat-card-title-group")(4,"mat-card-title"),e._uU(5," Trials Weapon Type usage over time "),e.qZA(),e.TgZ(6,"mat-card-subtitle"),e._uU(7),e.qZA()(),e._UZ(8,"app-weapon-usage-chart",9),e.qZA()()()),2&n){const t=e.oxw();e.xp6(7),e.hij(" Weeks 1 to ",t.week," "),e.xp6(1),e.Q6J("weeks",t.previousWeeks)}}function wt(n,i){1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"mat-card")(3,"mat-card-title-group")(4,"mat-card-title"),e._uU(5,"Trials Statistics"),e.qZA(),e.TgZ(6,"mat-card-subtitle"),e._uU(7," Data provided by "),e.TgZ(8,"a",12),e._uU(9,"Trials.Report"),e.qZA(),e._uU(10,". "),e.qZA()()()()())}const Mt=[{path:"",component:X.$,children:[{path:"",component:(()=>{class n{constructor(t,a){this.trialsReportApi=t,this._snackBar=a,this.updateStatus={isUpdating:!1,weeksToUpdate:0,updatingWeek:0},this.week=-1,this.previousWeeks=[],this.trialsReportData=void 0}ngOnInit(){var t=this;return(0,S.Z)(function*(){t.trialsReportData=yield(0,Z.z)(t.trialsReportApi.getMostRecent()),console.log(t.trialsReportData),t.week=t.trialsReportData.weekNumber;var a=t._snackBar.openFromComponent(ht,{data:"",horizontalPosition:"right",verticalPosition:"top"});t.updateStatus.weeksToUpdate=t.week-1,t.updateStatus.updatingWeek=0,t.updateStatus.isUpdating=!0;var s=[];for(let o=t.week-1;o>=1;o--)s.push(t.getWeek(o).then(l=>(t.updateStatus.updatingWeek++,a.instance.data=`Fetching Trials data (${t.updateStatus.updatingWeek} of ${t.updateStatus.weeksToUpdate})`,l)));var r=yield Promise.all(s);t.updateStatus.isUpdating=!1,a.dismiss(),t.previousWeeks=[t.trialsReportData].concat(r)})()}getWeek(t){var a=this;return(0,S.Z)(function*(){let s="trialsreport-week-"+t;var r=localStorage.getItem(s);if(null!=r)return JSON.parse(r);var o=yield(0,Z.z)(a.trialsReportApi.getApiData(t));return localStorage.setItem(s,JSON.stringify(o)),o})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(W),e.Y36(lt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-trials-data-report"]],decls:6,vars:4,consts:[["fxLayout","row","fxLayoutAlign","center none",1,"container"],["fxFlex","95%"],["class","container","fxLayout","row","fxLayoutAlign","center none",4,"ngIf"],["class","container","fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutAlign","center none","fxLayoutGap","15px",4,"ngIf"],["class","container","fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutAlign","center none","fxLayoutGap","5px",4,"ngIf"],["fxFlex","50%",1,"text-center","no-records","animate"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutAlign","center none","fxLayoutGap","15px",1,"container"],["fxFlex","50%","fxFlex.gt-lg","50%","fxFlex.sm","95%","fxFlex.xs","95%"],["mat-card-image","",3,"subclassData"],[3,"weeks"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutAlign","center none","fxLayoutGap","5px",1,"container"],["fxFlex","100%","fxFlex.gt-lg","100%","fxFlex.sm","100%","fxFlex.xs","100%"],["href","https://trials.report",1,"accent-color"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,At,7,0,"div",2),e.YNc(3,kt,17,4,"div",3),e.YNc(4,bt,9,2,"div",4),e.YNc(5,wt,11,0,"div",4),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",-1==a.week),e.xp6(1),e.Q6J("ngIf",a.trialsReportData),e.xp6(1),e.Q6J("ngIf",a.trialsReportData),e.xp6(1),e.Q6J("ngIf",a.trialsReportData))},dependencies:[k.O5,x.a8,x.C1,x.n5,x.$j,x.G2,D.xw,D.SQ,D.Wh,D.yH,Y.Hw,St,Ct,Tt],styles:["mat-card[_ngcontent-%COMP%]{margin-bottom:5px}"]}),n})()}]}];let Bt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[P.Bz.forChild(Mt),P.Bz]}),n})();var Rt=c(9814),Lt=c(3683);let Ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[W],imports:[k.ez,G,Bt,x.QW,Rt.o9,Y.Ps,xt.forRoot({echarts:()=>c.e(734).then(c.bind(c,4734))}),Lt.g0]}),n})()}}]);