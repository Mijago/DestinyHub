"use strict";(self.webpackChunkD2Hub=self.webpackChunkD2Hub||[]).push([["src_app_features_rewards-lookup_rewards-lookup_module_ts"],{5329:(K,h,r)=>{r.r(h),r.d(h,{RewardsLookupModule:()=>Q});var u=r(6895),b=r(1048),_=r(1184),y=r(5861),d=(()=>{return(t=d||(d={}))[t.EMBLEM=0]="EMBLEM",t[t.TRANSMAT_EFFECT=1]="TRANSMAT_EFFECT",d;var t})();const C={[d.EMBLEM]:"Emblem",[d.TRANSMAT_EFFECT]:"Transmat Effect"},w=[{name:"Seraphim's Gauntlets",code:"XVX-DKJ-CVM",type:d.EMBLEM,itemHash:1952218243,collectibleHash:2056946089,shortIconUrl:"https://www.bungie.net/common/destiny2_content/icons/518e5957dac0a7470b86aea158abf29c.jpg",wideIconUrl:"https://www.bungie.net/common/destiny2_content/icons/d535803d7cf7ee6b41476af20ae12bdd.jpg"},{name:"Stag's Spirit",code:"T67-JXY-PH6",type:d.EMBLEM,itemHash:1901885383,collectibleHash:1939502753,shortIconUrl:"https://www.bungie.net/common/destiny2_content/icons/313b57876840092ef843be204a17a903.jpg",wideIconUrl:"https://www.bungie.net/common/destiny2_content/icons/10fcff49483946a0653866eefdaa1293.jpg"},{name:"Be True",code:"ML3-FD4-ND9",type:d.EMBLEM,itemHash:3903070392,collectibleHash:3215337910,shortIconUrl:"https://www.bungie.net/common/destiny2_content/icons/775aba88c3235c8a38d68ec69f1f810c.jpg",wideIconUrl:"https://www.bungie.net/common/destiny2_content/icons/a6d9b66f124b25ac73969ebe4bc45b90.jpg"},{name:"A Classy Order",code:"YRC-C3D-YNC",type:d.EMBLEM,itemHash:3970180840,collectibleHash:3282448382,shortIconUrl:"https://www.bungie.net/common/destiny2_content/icons/7bde78ef4c5aefd0cfdb01b9f1366501.jpg",wideIconUrl:"https://www.bungie.net/common/destiny2_content/icons/adaf0e2c15610cdfff750725701222ec.jpg"},{name:"The Visionary",code:"XFV-KHP-N97",type:d.EMBLEM,itemHash:1940590820,collectibleHash:908813207,shortIconUrl:"https://www.bungie.net/common/destiny2_content/icons/73062ecd141e011d45f5a683aacea241.jpg",wideIconUrl:"https://www.bungie.net/common/destiny2_content/icons/65b4047b1b83aeeeb2e628305071fcea.jpg"},{name:"Sequence Flourish",code:"7D4-PKR-MD7",type:d.EMBLEM,itemHash:3919847960,collectibleHash:3232115498,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/e0d1cde8ffe0012424afa6b352b9954d.jpg",wideIconUrl:"https://www.bungie.net/common/destiny2_content/icons/01e9b3863c14f9149ff4035b896ad5ed.jpg"},{name:"Cryonautics",code:"RA9-XPH-6KJ",type:d.EMBLEM,itemHash:2962058745,collectibleHash:4137754755,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/5e464d751c38781067f43a4d9d3da37b.png",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/6719dde48dca592addb4102cb747e097.jpg"},{name:"Galilean Excursion",code:"JYN-JAA-Y7D",type:d.EMBLEM,itemHash:2962058747,collectibleHash:4137754753,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/a9d3db19c2e2d9bf4bae84c9cb51f6ab.png",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/3e99d575d00fb307c15fb5513dee13c6.jpg"},{name:"Future in Shadow",code:"7LV-GTK-T7J",type:d.EMBLEM,itemHash:2962058746,collectibleHash:4137754752,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/4be0d9062b1114f73ced6a051ce26c8a.jpg",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/dd9af60ef15319ee986a1f6cc029fe71.jpg"},{name:"C\u043e\u043d\u044f\u0448\u043d\u0438\u043a",code:"JVG-VNT-GGG",type:d.EMBLEM,itemHash:1968995963,collectibleHash:2006613205,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/538d64b6a6c074f7426f515200dba835.jpg",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/4c113db5e1c0296027a1c7e1f84fb8b3.jpg"},{name:"Crushed Gamma",code:"D97-YCX-7JK",type:d.EMBLEM,itemHash:1901885382,collectibleHash:1939502752,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/3cf8e1c3d18f4a3929da57fc58aa9c0a.jpg",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/74ebb19b261148e4a212eae3ac3b7ccb.jpg"},{name:"Liminal Nadir",code:"VA7-L7H-PNC",type:d.EMBLEM,itemHash:3752071760,collectibleHash:3399891682,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/0085555996cf066703d7e586224233bb.jpg",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/4f9f612716a973ff03e5e17e9d7e7c91.jpg"},{name:"Tangled Web",code:"PKH-JL6-L4R",type:d.EMBLEM,itemHash:3986958428,collectibleHash:3299225966,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/348c85451ba862c5bbdad0b34dbc5819.jpg",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/93a14eab2b1633d7affbf815d42af337.jpg"},{name:"Shadow's Light",code:"F99-KPX-NCF",type:d.EMBLEM,itemHash:3752071761,collectibleHash:3399891683,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/0f7a13bb8c8b1fff7e282a99d4a1419a.jpg",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/b296588f57aea1d15a04c3db6de98220.jpg"},{name:"Sneer of the Oni",code:"6LJ-GH7-TPA",type:d.EMBLEM,itemHash:3752071762,collectibleHash:3399891680,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/0a336f8bfe9b099add5eb0327ef28b4d.jpg",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/bffe84c0efb9215dbdc8c4890c3e6234.jpg"},{name:"Countdown to Convergence",code:"PHV-6LF-9CP",type:d.EMBLEM,itemHash:3752071767,collectibleHash:3399891685,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/ef506c58e6ceca2d0d1cc2b3e19619cd.png",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/2560de3d4009044b291c6cfb69d11a7f.jpg"},{name:"Heliotrope Warren",code:"L7T-CVV-3RD",type:d.EMBLEM,itemHash:3953403263,collectibleHash:3332781245,shortIconUrl:"https://bungie.net/common/destiny2_content/icons/2ec615bc8b933f53bdd26d4e9d46df3c.jpg",wideIconUrl:"https://bungie.net/common/destiny2_content/icons/385c302dc22e6dafb8b50c253486d040.jpg"},{name:"End of the Rainbow",code:"R9J-79M-J6C",type:d.TRANSMAT_EFFECT,itemHash:3549689934,collectibleHash:1009936720,shortIconUrl:"https://www.bungie.net/common/destiny2_content/icons/7efd5af9453e66abde98884e84507398.jpg"}];var s=r(7340),e=r(4650),x=r(6625),M=r(7009),f=r(1576),T=r(7392),v=r(3683),L=r(4859),p=r(3546),k=r(266),P=r(1731);class E{constructor(a,n){this._document=n;const o=this._textarea=this._document.createElement("textarea"),c=o.style;c.position="fixed",c.top=c.opacity="0",c.left="-999em",o.setAttribute("aria-hidden","true"),o.value=a,o.readOnly=!0,this._document.body.appendChild(o)}copy(){const a=this._textarea;let n=!1;try{if(a){const o=this._document.activeElement;a.select(),a.setSelectionRange(0,a.value.length),n=this._document.execCommand("copy"),o&&o.focus()}}catch{}return n}destroy(){const a=this._textarea;a&&(a.remove(),this._textarea=void 0)}}let O=(()=>{class t{constructor(n){this._document=n}copy(n){const o=this.beginCopy(n),c=o.copy();return o.destroy(),c}beginCopy(n){return new E(n,this._document)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(u.K0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const H=new e.OlP("CDK_COPY_TO_CLIPBOARD_CONFIG");let I=(()=>{class t{constructor(n,o,c){this._clipboard=n,this._ngZone=o,this.text="",this.attempts=1,this.copied=new e.vpe,this._pending=new Set,c&&null!=c.attempts&&(this.attempts=c.attempts)}copy(n=this.attempts){if(n>1){let o=n;const c=this._clipboard.beginCopy(this.text);this._pending.add(c);const i=()=>{const l=c.copy();l||!--o||this._destroyed?(this._currentTimeout=null,this._pending.delete(c),c.destroy(),this.copied.emit(l)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(i,1))};i()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(n=>n.destroy()),this._pending.clear(),this._destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(O),e.Y36(e.R0b),e.Y36(H,8))},t.\u0275dir=e.lG2({type:t,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(n,o){1&n&&e.NdJ("click",function(){return o.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}}),t})(),U=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({}),t})();function R(t,a){if(1&t&&(e.TgZ(0,"a",18),e._uU(1),e.qZA()),2&t){const n=e.oxw(2).$implicit;e.MGl("href","https://destinyemblemcollector.com/emblem?id=",n.itemHash,"",e.LSH)("title","Open '",n.name,"' in destinyemblemcollector.com"),e.xp6(1),e.Oqu(n.name)}}function F(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw(2).$implicit;e.xp6(1),e.Oqu(n.name)}}function A(t,a){1&t&&(e.TgZ(0,"span"),e._uU(1,"\xa0-\xa0acquired"),e.qZA())}function j(t,a){1&t&&(e.TgZ(0,"span"),e._uU(1,"\xa0-\xa0not acquired"),e.qZA())}function B(t,a){if(1&t&&(e.TgZ(0,"mat-card-footer"),e._UZ(1,"img",19),e.qZA()),2&t){const n=e.oxw(2).$implicit;e.xp6(1),e.s9C("src",n.wideIconUrl,e.LSH)}}function Z(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",9)(1,"mat-card",10)(2,"mat-card-header"),e._UZ(3,"div",11),e.TgZ(4,"mat-card-title-group")(5,"mat-card-title"),e.YNc(6,R,2,3,"a",12),e.YNc(7,F,2,1,"span",13),e.qZA(),e.TgZ(8,"mat-card-subtitle",14),e.NdJ("cdkCopyToClipboardCopied",function(){e.CHM(n);const c=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.copied(c.code))}),e.TgZ(9,"span",15),e._uU(10),e.qZA(),e.YNc(11,A,2,0,"span",13),e.YNc(12,j,2,0,"span",13),e.qZA()(),e._UZ(13,"div",16),e.TgZ(14,"a",17)(15,"mat-icon"),e._uU(16,"redeem"),e.qZA()()(),e.YNc(17,B,2,1,"mat-card-footer",13),e.qZA()()}if(2&t){const n=e.oxw().$implicit,o=e.oxw(2);e.Q6J("fxFlex",100/3+"%")("@fade",void 0)("fxFlex.md",100/3+"%")("fxFlex.xl",100/6+"%"),e.xp6(1),e.ekj("state-unknown",0==n.state)("state-rewarded",2==n.state)("state-not-rewarded",1==n.state),e.xp6(2),e.Jzz("background-image: url('",n.shortIconUrl,"');  "),e.xp6(3),e.Q6J("ngIf",n.type==o.BungieRewardCodeType.EMBLEM),e.xp6(1),e.Q6J("ngIf",n.type!=o.BungieRewardCodeType.EMBLEM),e.xp6(1),e.Q6J("cdkCopyToClipboard",n.code),e.xp6(2),e.Oqu(n.code),e.xp6(1),e.Q6J("ngIf",2==n.state),e.xp6(1),e.Q6J("ngIf",1==n.state),e.xp6(2),e.MGl("href","https://www.bungie.net/7/en/codes/redeem?token=",n.code,"",e.LSH),e.Q6J("disabled",2==n.state),e.xp6(3),e.Q6J("ngIf",n.wideIconUrl)}}function J(t,a){if(1&t&&(e.ynx(0),e.YNc(1,Z,18,22,"div",8),e.BQk()),2&t){const n=a.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.type==o)}}function N(t,a){if(1&t&&(e.TgZ(0,"div")(1,"mat-toolbar",6),e._uU(2),e.qZA(),e.TgZ(3,"div",0)(4,"div",1)(5,"div",7),e.YNc(6,J,2,1,"ng-container",5),e.qZA()()()()),2&t){const n=a.$implicit,o=e.oxw();e.xp6(2),e.hij(" ",o.CodeTypeNames[n],"s "),e.xp6(4),e.Q6J("ngForOf",o.codes)}}var m=(()=>{return(t=m||(m={}))[t.Unknown=0]="Unknown",t[t.NotRewarded=1]="NotRewarded",t[t.Rewarded=2]="Rewarded",m;var t})();const G=[{path:"",component:_.$,children:[{path:"",component:(()=>{class t{constructor(n,o){this.guardian=n,this._snackBar=o,this.BungieRewardCodeType=d,this.codes=[],this.CodeTypeNames=C,this._availableCodeTypes=[],this._availableCodeTypes=Array.from(w.reduce((c,i)=>c.add(i.type),new Set)),this.codes=w.sort((c,i)=>c.name>i.name?1:-1).map(c=>Object.assign({state:m.Unknown},c))}ngOnInit(){}reset(){this.codes.forEach(n=>n.state=m.Unknown)}copied(n){this._snackBar.open("Copied the code "+n+" to the clipboard.","Thanks!",{duration:3e3})}selectGuardian(n){var o=this;return(0,y.Z)(function*(){if(null==n)return o.reset();var c=yield o.guardian.getCollectibleStatus(n.membershipType,n.membershipId.toString()),i=Object.keys(c);o.codes.forEach(l=>{l.state=-1==i.indexOf(l.collectibleHash.toString())?m.Unknown:0==(1&c[l.collectibleHash].state)?m.Rewarded:m.NotRewarded}),o.codes.sort((l,g)=>l.state-g.state)})()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(x.J),e.Y36(M.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-rewards-lookup-page"]],decls:13,vars:2,consts:[["fxLayout","row","fxLayoutAlign","center none",1,"container"],["fxFlex","95%"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutAlign","center none","fxLayoutGap","15px",1,"container"],["fxFlex","100%","fxFlex.gt-lg","50%","fxFlex.sm","100%","fxFlex.xs","100%"],[3,"enableLoggedInUser","onGuardianSelection"],[4,"ngFor","ngForOf"],[1,"category-spacer"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex.xs","100%","fxFlex.sm","50%",3,"fxFlex","fxFlex.md","fxFlex.xl",4,"ngIf"],["fxFlex.xs","100%","fxFlex.sm","50%",3,"fxFlex","fxFlex.md","fxFlex.xl"],[1,"reward-card","mat-elevation-z4"],["mat-card-avatar","",1,"card-icon"],["target","_blank","class","header-link",3,"href","title",4,"ngIf"],[4,"ngIf"],["title","Click to copy this code to your clipboard.",3,"cdkCopyToClipboard","cdkCopyToClipboardCopied"],[1,"clipboard-text"],["fxFlex",""],["mat-fab","","color","accent","target","_blank","matTooltip","Open the Bungie.net Redemption Page with this code already entered.",3,"disabled","href"],["target","_blank",1,"header-link",3,"href","title"],[1,"reward-imag-wide",3,"src"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-card")(5,"mat-card-title-group")(6,"mat-card-title"),e._uU(7,"Guardian Selection"),e.qZA(),e.TgZ(8,"mat-card-subtitle"),e._uU(9,"Select a guardian to see which codes they can redeem."),e.qZA()(),e.TgZ(10,"mat-card-content")(11,"app-guardian-selection",4),e.NdJ("onGuardianSelection",function(i){return o.selectGuardian(i)}),e.qZA()()()()()()(),e.YNc(12,N,7,2,"div",5)),2&n&&(e.xp6(11),e.Q6J("enableLoggedInUser",!0),e.xp6(1),e.Q6J("ngForOf",o._availableCodeTypes))},dependencies:[u.sg,u.O5,f.xw,f.SQ,f.Wh,f.yH,T.Hw,v.Ye,L.zs,p.a8,p.dk,p.C1,p.dn,p.n5,p.$j,p.rt,p.kc,k.gM,P.Q,I],styles:[".reward-card[_ngcontent-%COMP%]{margin-bottom:16px}.reward-card[_ngcontent-%COMP%]   .reward-imag-wide[_ngcontent-%COMP%]{width:100%}.reward-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.reward-card.state-rewarded[_ngcontent-%COMP%]{color:#019801;opacity:.9}.reward-card.state-rewarded[_ngcontent-%COMP%]   a.header-link[_ngcontent-%COMP%]{color:#019801}.reward-card.state-not-rewarded[_ngcontent-%COMP%]{border-width:3px;border-style:solid}.theme-titan[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]{color:#ff8a80}  .theme-titan .reward-card.state-not-rewarded{color:#ff8a80}.theme-warlock[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]{color:#ffd740}  .theme-warlock .reward-card.state-not-rewarded{color:#ffd740}.theme-hunter[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]{color:#ffd740}  .theme-hunter .reward-card.state-not-rewarded{color:#ffd740}.theme-titan[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]{border-color:#ff8a80}  .theme-titan .reward-card.state-not-rewarded{border-color:#ff8a80}.theme-warlock[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]{border-color:#ffd740}  .theme-warlock .reward-card.state-not-rewarded{border-color:#ffd740}.theme-hunter[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]{border-color:#ffd740}  .theme-hunter .reward-card.state-not-rewarded{border-color:#ffd740}.reward-card.state-not-rewarded[_ngcontent-%COMP%]   a.header-link[_ngcontent-%COMP%]{color:red}.theme-titan[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]   a.header-link[_ngcontent-%COMP%]{color:#ff8a80}  .theme-titan .reward-card.state-not-rewarded a.header-link{color:#ff8a80}.theme-warlock[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]   a.header-link[_ngcontent-%COMP%]{color:#ffd740}  .theme-warlock .reward-card.state-not-rewarded a.header-link{color:#ffd740}.theme-hunter[_ngcontent-%COMP%]   .reward-card.state-not-rewarded[_ngcontent-%COMP%]   a.header-link[_ngcontent-%COMP%]{color:#ffd740}  .theme-hunter .reward-card.state-not-rewarded a.header-link{color:#ffd740}.category-spacer[_ngcontent-%COMP%]{margin-bottom:8px}.card-icon[_ngcontent-%COMP%]{background-size:cover;height:40px;width:40px;flex-shrink:0;object-fit:cover;border-radius:0}.clipboard-text[_ngcontent-%COMP%]{background-color:#212121;padding:2px;cursor:pointer}.destinyEmblemCollectorIcon[_ngcontent-%COMP%]{height:18px;vertical-align:sub;margin-right:5px}"],data:{animation:[(0,s.X$)("fade",[(0,s.eR)(":enter",[(0,s.oB)({opacity:0}),(0,s.jt)(300,(0,s.oB)({opacity:1}))]),(0,s.eR)(":leave",[(0,s.oB)({opacity:1}),(0,s.jt)(300,(0,s.oB)({opacity:0}))])])]}}),t})()}]}];let Y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[b.Bz.forChild(G),b.Bz]}),t})();var D=r(4466);let Q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,D.m,U,Y]}),t})()}}]);