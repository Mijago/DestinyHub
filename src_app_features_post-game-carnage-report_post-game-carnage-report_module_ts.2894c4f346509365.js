"use strict";(self.webpackChunkD2Hub=self.webpackChunkD2Hub||[]).push([["src_app_features_post-game-carnage-report_post-game-carnage-report_module_ts"],{2483:(mt,C,o)=>{o.r(C),o.d(C,{PostGameCarnageReportModule:()=>ct});var s=o(6895),d=o(3797),y=o(1184),v=o(5861),_=o(9841),P=o(4482);const{isArray:Z}=Array;function x(e){return 1===e.length&&Z(e[0])?e[0]:e}var R=o(3268),A=o(9635),T=o(3269);function h(...e){const n=(0,T.jO)(e);return n?(0,A.z)(h(...e),(0,R.Z)(n)):(0,P.e)((a,c)=>{(0,_.l)([a,...x(e)])(c)})}function G(...e){return h(...e)}var D=o(6489),t=o(4650),U=o(4623),N=o(1109),i=o(3546),g=o(1576),r=o(671),p=o(7084);function Y(e,n){if(1&e&&t._UZ(0,"div",16),2&e){const a=t.oxw(2);t.Udp("background-image","url(https://bungie.net/"+a.activity.displayProperties.icon+")")}}function j(e,n){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Name"),t.qZA())}function b(e,n){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.AsE(" ",a.player.destinyUserInfo.bungieGlobalDisplayName," #",a.player.destinyUserInfo.bungieGlobalDisplayNameCode," ")}}function Q(e,n){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Kills"),t.qZA())}function w(e,n){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"json"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.values.kills.basic.value)," ")}}function L(e,n){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Assists"),t.qZA())}function M(e,n){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"json"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.values.assists.basic.value)," ")}}function O(e,n){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Deaths"),t.qZA())}function B(e,n){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"json"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.values.deaths.basic.value)," ")}}function I(e,n){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Efficiency"),t.qZA())}function S(e,n){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"json"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.values.efficiency.basic.value)," ")}}function z(e,n){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.name," ")}}function J(e,n){1&e&&t._UZ(0,"mat-row",17)}function H(e,n){1&e&&t._UZ(0,"mat-header-row")}function E(e,n){1&e&&t._UZ(0,"mat-row")}const $=function(){return["groupHeader"]};function q(e,n){if(1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title-group"),t.YNc(2,Y,1,2,"div",3),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"mat-table",4),t.ynx(10,5),t.YNc(11,j,2,0,"mat-header-cell",6),t.YNc(12,b,2,2,"mat-cell",7),t.BQk(),t.ynx(13,8),t.YNc(14,Q,2,0,"mat-header-cell",6),t.YNc(15,w,3,3,"mat-cell",7),t.BQk(),t.ynx(16,9),t.YNc(17,L,2,0,"mat-header-cell",6),t.YNc(18,M,3,3,"mat-cell",7),t.BQk(),t.ynx(19,10),t.YNc(20,O,2,0,"mat-header-cell",6),t.YNc(21,B,3,3,"mat-cell",7),t.BQk(),t.ynx(22,11),t.YNc(23,I,2,0,"mat-header-cell",6),t.YNc(24,S,3,3,"mat-cell",7),t.BQk(),t.ynx(25,12),t.YNc(26,z,2,1,"mat-cell",7),t.BQk(),t.YNc(27,J,1,0,"mat-row",13),t.YNc(28,H,1,0,"mat-header-row",14),t.YNc(29,E,1,0,"mat-row",15),t.qZA()()()),2&e){const a=t.oxw();t.xp6(2),t.Q6J("ngIf",a.activity.displayProperties.hasIcon),t.xp6(2),t.hij(" ",a.activity.displayProperties.name," "),t.xp6(2),t.hij(" Post Game Carnage Report - ",t.xi3(7,8,a.pgcrDate,"medium")," "),t.xp6(3),t.Q6J("dataSource",a.dataSource),t.xp6(18),t.Q6J("matRowDefColumns",t.DdM(11,$))("matRowDefWhen",a.isGroup),t.xp6(1),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function W(e,n){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2,"Statistics"),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4,"Some more or less useful statistics to this PGCR"),t.qZA(),t._UZ(5,"mat-card-content"),t.qZA())}function F(e,n){if(1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2,"Raw PGCR Data"),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4,"The raw PGCR data is hidden by default. Click a row to expand it."),t.qZA(),t.TgZ(5,"mat-card-content")(6,"mat-accordion")(7,"mat-expansion-panel")(8,"mat-expansion-panel-header")(9,"mat-panel-title"),t._uU(10," PGCR Data "),t.qZA()(),t.TgZ(11,"pre",18),t._uU(12),t.ALo(13,"json"),t.qZA()(),t.TgZ(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),t._uU(17," Activity Data "),t.qZA()(),t.TgZ(18,"pre",18),t._uU(19),t.ALo(20,"json"),t.qZA()()()()()),2&e){const a=t.oxw();t.xp6(12),t.Oqu(t.lcZ(13,2,a.pgcr)),t.xp6(7),t.Oqu(t.lcZ(20,4,a.activity))}}const V=[{path:"",component:y.$,children:[{path:":pgcr",component:(()=>{class e{constructor(a,c,l){this.bungieApi=a,this.manifest=c,this.activeRoute=l,this.displayedColumns=["name","kills","assists","deaths","efficiency"],this.pgcr=null,this.teams=[],this.activity=void 0,this.dataSource=[]}isGroup(a,c){return!!c.name}ngOnInit(){var a=this;this.activeRoute.params.pipe(G(this.manifest.ensureManifestTableExists("DestinyActivityDefinition"))).subscribe(function(){var c=(0,v.Z)(function*(l){var rt=l[0].pgcr,it=yield a.bungieApi.getPostGameCarnageReport(rt);a.pgcr=it.Response,a.activity=yield D.s.DestinyActivityDefinition.where("hash").equals(a.pgcr.activityDetails.directorActivityHash).first(),console.log("this.activity",a.activity);var f=[{name:"PvE",players:a.pgcr.entries}];a.pgcr.teams.length>1&&(f=a.pgcr.entries.reduce((m,u)=>(m[u.values.team.basic.value-18].players.push(u),m),[{name:"Alpha",players:[]},{name:"Bravo",players:[]}]));for(let m of f){a.dataSource.push(m);for(let u of m.players)a.dataSource.push(u)}a.teams=f});return function(l){return c.apply(this,arguments)}}())}get pgcrDate(){return this.pgcr?Date.parse(this.pgcr.period):""}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(U.A),t.Y36(N.W),t.Y36(d.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pgcrpage"]],decls:9,vars:3,consts:[["fxLayout","row","fxLayoutAlign","center none",1,"container"],["fxFlex","95%"],[4,"ngIf"],["mat-card-avatar","","style","background-size: cover;",3,"background-image",4,"ngIf"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","kills"],["matColumnDef","assists"],["matColumnDef","deaths"],["matColumnDef","efficiency"],["matColumnDef","groupHeader"],["class","category-header",4,"matRowDef","matRowDefColumns","matRowDefWhen"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-card-avatar","",2,"background-size","cover"],[1,"category-header"],[1,"code"]],template:function(a,c){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,q,30,12,"mat-card",2),t.qZA()(),t.TgZ(3,"div",0)(4,"div",1),t.YNc(5,W,6,0,"mat-card",2),t.qZA()(),t.TgZ(6,"div",0)(7,"div",1),t.YNc(8,F,21,6,"mat-card",2),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("ngIf",null!=c.pgcr&&null!=c.activity),t.xp6(3),t.Q6J("ngIf",null!=c.pgcr&&null!=c.activity),t.xp6(3),t.Q6J("ngIf",null!=c.pgcr&&null!=c.activity))},dependencies:[s.O5,i.a8,i.C1,i.dn,i.n5,i.$j,i.kc,g.xw,g.Wh,g.yH,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,p.pp,p.ib,p.yz,p.yK,s.Ts,s.uU],styles:[".code[_ngcontent-%COMP%]{font-family:monospace;background-color:#333}  .category-header{height:20px}.category-header[_ngcontent-%COMP%], .category-header[_ngcontent-%COMP%]:hover{background-color:#ffffff52}"]}),e})()},{path:"**",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pgcrerror-page"]],decls:2,vars:0,template:function(a,c){1&a&&(t.TgZ(0,"p"),t._uU(1,"pgcrerror-page works!"),t.qZA())}}),e})()}]}];let k=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(V),d.Bz]}),e})();var tt=o(5823),et=o(7392),at=o(3683),nt=o(6338),ot=o(4466);let ct=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,k,i.QW,tt.o9,et.Ps,at.g0,nt.ie,r.p0,ot.m]}),e})()}}]);